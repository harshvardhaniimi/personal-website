---
title: 'garlic: Some R Functions I Use Rather Frequently'
subtitle: 'My personal R package for custom functions'
summary: 'My personal R package for custom functions'
author: Harshvardhan
date: '2022-03-05'
slug: garlic-some-r-functions-i-use-rather-frequently
categories:
  - R
  - package
  - publication
tags: []
links:
- icon: github
  icon_pack: fab
  name: Github
  url: https://github.com/harshvardhaniimi/garlic
- icon: shapes
  icon_pack: fas
  name: Vignette
  url: https://harshvardhaniimi.github.io/garlic/
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<blockquote>
<p>Without garlic I simply would not care to <del>live</del> code. — <a href="https://twitter.com/kitchenbee/status/991244972501368833">Louis Diat</a><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</blockquote>
<p><a href="https://harshvardhaniimi.github.io/garlic/"><img src="images/Screen%20Shot%202022-03-16%20at%2010.24.59%20AM.png" /></a></p>
<p>These are some functions that I use very frequently in my projects. There are three categories of functions: exploratory functions to check missing values and describe data, visualisation functions for my ggplot2 themes and manipulative functions to modify selected variables.</p>
<div id="installing-the-package" class="section level1">
<h1>Installing the Package</h1>
<p>If you don’t have <code>devtools</code>, install that first. <code>devtools</code> provides the function <code>install_github()</code> which can be used to install R packages hosted on Github.</p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)</code></pre>
<pre class="r"><code>#devtools::install_github(&quot;harshvardhaniimi/garlic&quot;)
library(garlic)</code></pre>
</div>
<div id="exploratory-functions" class="section level1">
<h1>Exploratory Functions</h1>
<p>There are three exploratory functions. This vignette demonstrates how exploratory functions like <code>show_in_excel()</code>, <code>which_na()</code> and <code>which_this()</code> can be used.</p>
<pre class="r"><code>library(garlic)</code></pre>
<div id="examples" class="section level2">
<h2>Examples</h2>
<pre class="r"><code>df = iris</code></pre>
<div id="show-a-data-frame-in-ms-excel" class="section level3">
<h3>Show a data frame in MS Excel</h3>
<p>I found this function on Twitter but can’t find that tweet anymore.</p>
<pre class="r"><code>show_in_excel(df)</code></pre>
<p>It can also be used with pipes.</p>
<pre class="r"><code>library(dplyr)
df %&gt;% 
   show_in_excel()</code></pre>
</div>
<div id="which-values-are-missing" class="section level3">
<h3>Which values are missing?</h3>
<p>I’m initialising a vector from 1 to 10 with fifth value as missing <code>NA</code>.</p>
<pre class="r"><code>x = c(1:4, NA, 6:10)</code></pre>
<p>Using <code>which_na()</code>, I can find index of element in the vector which is <code>NA</code>.</p>
<pre class="r"><code>which_na(x)</code></pre>
<pre><code>## [1] 5</code></pre>
</div>
<div id="which-element-is-this" class="section level3">
<h3>Which element is this?</h3>
<p>It can identify values that satisfy a criteria. It is kind of a wrapper around dplyr’s filter().</p>
<pre class="r"><code>which_this(iris, &quot;Sepal.Length &gt; 7&quot;)</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species
## 1           7.1         3.0          5.9         2.1 virginica
## 2           7.6         3.0          6.6         2.1 virginica
## 3           7.3         2.9          6.3         1.8 virginica
## 4           7.2         3.6          6.1         2.5 virginica
## 5           7.7         3.8          6.7         2.2 virginica
## 6           7.7         2.6          6.9         2.3 virginica
## 7           7.7         2.8          6.7         2.0 virginica
## 8           7.2         3.2          6.0         1.8 virginica
## 9           7.2         3.0          5.8         1.6 virginica
## 10          7.4         2.8          6.1         1.9 virginica
## 11          7.9         3.8          6.4         2.0 virginica
## 12          7.7         3.0          6.1         2.3 virginica</code></pre>
</div>
</div>
</div>
<div id="manipulative-functions" class="section level1">
<h1>Manipulative Functions</h1>
<p>There are two mutating functions that modify data frames in a certain way. <code>na_rm_feature()</code> is used for removing observations based on a single variable. <code>na_to_zero()</code> converts missing values to zero.</p>
<pre class="r"><code>library(garlic)</code></pre>
<div id="examples-1" class="section level2">
<h2>Examples</h2>
<div id="removing-rows-based-on-missing-values-in-a-column" class="section level3">
<h3>Removing Rows Based on Missing Values in a Column</h3>
<p>Sometimes, I do not want to <code>na.omit()</code> because it will treat all features equally. I want to check values only for one column, while removing those observations.</p>
<pre class="r"><code># First ten rows of iris dataset
df = iris[1:10,]
df</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<pre class="r"><code># Setting second sepal width to NA
df$Sepal.Width[2] = NA
df</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9          NA          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<pre class="r"><code># Removing that observation
df = na_rm_feature(df, &quot;Sepal.Width&quot;)
df</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
</div>
<div id="changing-missing-values-to-zero" class="section level3">
<h3>Changing Missing Values to Zero</h3>
<p>This function converts missing values to zero.</p>
<pre class="r"><code># First ten rows of iris dataset
df = iris[1:10,]
df</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9         3.0          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<pre class="r"><code># Setting second sepal width to NA
df$Sepal.Width[2] = NA
df</code></pre>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1           5.1         3.5          1.4         0.2  setosa
## 2           4.9          NA          1.4         0.2  setosa
## 3           4.7         3.2          1.3         0.2  setosa
## 4           4.6         3.1          1.5         0.2  setosa
## 5           5.0         3.6          1.4         0.2  setosa
## 6           5.4         3.9          1.7         0.4  setosa
## 7           4.6         3.4          1.4         0.3  setosa
## 8           5.0         3.4          1.5         0.2  setosa
## 9           4.4         2.9          1.4         0.2  setosa
## 10          4.9         3.1          1.5         0.1  setosa</code></pre>
<pre class="r"><code>na_to_zero(df$Sepal.Width)</code></pre>
<pre><code>##  [1] 3.5 0.0 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1</code></pre>
</div>
</div>
</div>
<div id="ggserif-theme" class="section level1">
<h1><code>ggserif()</code> Theme</h1>
<p>I converted axes to directed arrows and made background grid more transparent. In academic publications, serif fonts are often preferred. Thus serif fonts are used.</p>
<pre class="r"><code>library(garlic)
library(ggplot2)
library(dplyr)</code></pre>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre class="r"><code>library(patchwork)</code></pre>
<p>This theme upgrades basic <code>ggplot2</code> themes. It is particularly suitable for academic publications that require serif fonts for labels and arrowed axes.</p>
<div id="visually-comparing-with-default-linedraw-and-dark-themes" class="section level3">
<h3>Visually Comparing with Default, Linedraw and Dark Themes</h3>
<p>Among the themes available in <code>ggplot2</code>, linedraw is my favourite.</p>
<pre class="r"><code>p1 = iris %&gt;%
  ggplot(aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) +
  geom_point() +
  labs(title = &quot;Default Theme&quot;)

p2 = iris %&gt;%
  ggplot(aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) +
  geom_point() +
  labs(title = &quot;theme_minimal()&quot;) +
  theme_linedraw()

p3 = iris %&gt;%
  ggplot(aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) +
  geom_point() +
  labs(title = &quot;theme_dark()&quot;) +
  theme_dark()

p4 = iris %&gt;%
  ggplot(aes(x = Sepal.Length, y = Sepal.Width, colour = Species)) +
  geom_point() +
  labs(title = &quot;ggserif()&quot;) +
  ggserif()</code></pre>
<pre class="r"><code># Using patchwork, I can easily stitch these plots together.
p1 / p2 / p3 / p4</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-13-1.png" width="960" /></p>
</div>
<div id="setting-theme-globally" class="section level2">
<h2>Setting theme globally</h2>
<p>You can set theme globally for all plots using the following command.</p>
<pre class="r"><code>theme_set(ggserif())</code></pre>
</div>
</div>
<div id="citation" class="section level1">
<h1>Citation</h1>
<p>Harshvardhan, M. (March 2022). garlic: Some R Functions I Use Rather Frequently. v0.1.0 (r-package). Github, Zenodo. <a href="https://doi.org/10.5281/zenodo.6331095" class="uri">https://doi.org/10.5281/zenodo.6331095</a></p>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>Louis Diat was a French-American chef. I added the quote because it sounds cool. I called the package <code>garlic</code> simply because I love the taste of garlic.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
