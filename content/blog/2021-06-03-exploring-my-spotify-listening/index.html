---
title: Exploring My Spotify Listening
subtitle: Creating My Own Year-in-Review
summary: I analyse my listening stats and patterns using R.
author: Harshvardhan
date: '2020-06-03'
slug: []
categories:
  - R
  - life
  - music
tags:
  - life
  - music
---

<script src="{{< blogdown/postref >}}index_files/header-attrs/header-attrs.js"></script>


<p>I have been using Spotify for two years now. I was always curious to know my listening trends, which is why I started using last.fm and other tools like that. However, they didn’t give me exact information as to what I listened – the insights Spotify gave me were limited to what Spotify thought! I couldn’t know more about which artists I listened to, what were the top songs from that artist and so on.</p>
<p>Therefore, I looked up for my listening data on Spotify (thank you, GDPR!) and then made some nice plots for inferences.</p>
<div id="getting-streaming-history" class="section level2">
<h2>Getting Streaming History</h2>
<p>Spotify allows you to download all your data through its <a href="https://www.spotify.com/us/account/privacy/">accounts webpage</a>. First, you need to request for all your data. This step will take something between a day or a fortnight depending how much you listen. For me, it took two working days and I got two files on streaming. Again, for heavy listeners, there will be more files.</p>
<div class="figure">
<img src="images/Screenshot%202021-06-18%20at%2012.10.41%20AM.png" alt="" />
<p class="caption">spotify data download</p>
</div>
</div>
<div id="lets-play-some-music" class="section level1">
<h1>Let’s Play Some Music!</h1>
<p>First, we will load the streaming history files in R. If there are multiple files, read them all one by one like I’ve done here. Finally, combine all of them together. Don’t forget to remove the ones you don’t need – it takes a lot of run-time memory.</p>
<pre class="r"><code>history1 = fromJSON(&quot;StreamingHistory0.json&quot;, flatten = TRUE)
history2 = fromJSON(&quot;StreamingHistory1.json&quot;, flatten = TRUE)
 
st = rbind(history1,history2)
rm(history1,history2)

# what does the dataframe contain.
head(st)

           endTime     artistName            trackName msPlayed
1 2019-07-26 03:23    A.R. Rahman Ok Jaanu Title Track   206250
2 2019-07-26 03:26    A.R. Rahman            Enna Sona   213632
3 2019-07-26 03:27    A.R. Rahman             Jee Lein    42292
4 2019-07-26 03:39 Vishal Dadlani              Adhoore   104396
5 2019-07-26 09:25        Karthik            Behene De    11719
6 2019-07-26 13:03 Vishal Dadlani       Swag Se Swagat   235944</code></pre>
<div id="artists" class="section level2">
<h2>Artists</h2>
<p>To find out which artists I listen to most, let me make a visualisation for the same.</p>
<p>{{&lt; panelset class=“greetings” &gt;}}
{{&lt; panel name=“My Artists :sunglasses:” &gt;}}
<img src="images/artists.png" alt="my top artists" />
{{&lt; /panel &gt;}}
{{&lt; panel name=“Code :computer:” &gt;}}</p>
<pre class="r"><code>st %&gt;%
count(artistName, sort = TRUE) %&gt;%
top_n(15) %&gt;%
mutate(artistName = reorder(artistName, n)) %&gt;%
ggplot(aes(x = artistName, y = n)) +
geom_bar(aes(fill=n),   
         stat=&quot;identity&quot;) +
scale_fill_distiller(palette=&quot;Spectral&quot;) +
xlab(NULL) +
coord_flip() +
labs(x = &quot;Artist&quot;,
     title = &quot;Artists I listened most to&quot;,
     fill = &quot;Count&quot;) +
theme_minimal()</code></pre>
<ul>
<li>count(artistName, sort = TRUE) is going to count all the artists as their total count is going to tell me how many I listen to.</li>
<li>top_n(15) is going to give me top 15 entries.</li>
<li>mutate(artistName = reorder(artistName, n)) will reorder the tibble, sorted by their counts.</li>
<li>geom_bar() is used for barplots, scale_fill_distiller() is used for colourful and continuous scale. Rest functions are for cosmetic reasons.
{{&lt; /panel &gt;}}
{{&lt; /panelset &gt;}}</li>
</ul>
<p>As you can observe, I listened most to Arijit Singh, Pritam and AR Rahman. The top non-Indian artist here is Post Malone and Billie Ellish – and only two in top 15. This is not surprising as I mostly like Bollywood artists as they mix classical and pop really well.</p>
</div>
<div id="tracks" class="section level2">
<h2>Tracks</h2>
<p>Again, I will make a visualisation and use it for inference. The functions and explanations are the same as in artists.</p>
<p>{{&lt; panelset class=“greetings” &gt;}}
{{&lt; panel name=“Tracks :notes:” &gt;}}
<img src="images/tracks.png" alt="my top tracks" />
{{&lt; /panel &gt;}}
{{&lt; panel name=“Code :computer:” &gt;}}</p>
<pre class="r"><code>st %&gt;%
count(trackName, sort = TRUE) %&gt;%
top_n(15) %&gt;%
mutate(trackName = reorder(trackName, n)) %&gt;%
ggplot(aes(x = trackName, y = n)) +
geom_bar(aes(fill=n),   
         stat=&quot;identity&quot;) +
scale_fill_distiller(palette=&quot;Spectral&quot;) +
xlab(NULL) +
coord_flip() +
labs(y = &quot;Count&quot;,
     title = &quot;Tracks I listened most to&quot;,
     fill = &quot;Count&quot;) +
theme_minimal()</code></pre>
<p>{{&lt; /panel &gt;}}
{{&lt; /panelset &gt;}}</p>
<p>In contrast to my top artists, far more non-bollywood songs feature in my top tracks. In fact, three out of top-five tracks are non-Indian.</p>
<p>It is probably because I mostly listen to bollywood and a select few from other genres; but when I do listen other genres, I quickly grow to love them.</p>
</div>
<div id="tracks-by-artists" class="section level2">
<h2>Tracks by Artists</h2>
<p>Considering my listening history of artists and tracks give two different pictures, let me see which songs do I really listen to by my top artists.</p>
<p>One line needs to be added for selecting the artists: <code>filter(artistName == "KK")</code> before <code>count()</code> and after <code>st</code>.</p>
<p>{{&lt; panelset class=“greetings” &gt;}}
{{&lt; panel name=“Tracks :notes:” &gt;}}
<img src="images/kk.png" alt="kk songs" />
{{&lt; /panel &gt;}}
{{&lt; panel name=“Code :computer:” &gt;}}</p>
<pre class="r"><code># by KK
st %&gt;%
filter(artistName == &quot;KK&quot;) %&gt;%
count(trackName, sort = TRUE) %&gt;%
top_n(15) %&gt;%
mutate(trackName = reorder(trackName, n)) %&gt;%
ggplot(aes(x = trackName, y = n)) +
geom_bar(aes(fill=n),   
         stat=&quot;identity&quot;) +
scale_fill_distiller(palette=&quot;Spectral&quot;) +
xlab(NULL) +
coord_flip() +
labs(y = &quot;Count&quot;,
     title = &quot;Top tracks by KK&quot;,
     fill = &quot;Count&quot;) +
theme_minimal()</code></pre>
<p>{{&lt; /panel &gt;}}
{{&lt; /panelset &gt;}}</p>
</div>
<div id="time-of-listening" class="section level2">
<h2>Time of Listening</h2>
<p>Finally, I want to what time of the day I listen to most. Now, I could’ve made a barplot but then I remembered of a neat “clock plot” I saw once on <a href="https://www.reddit.com/r/dataisbeautiful/">Reddit (r/dataisbeautiful)</a>. I wanted to replicate it with my own Spotify history.</p>
<p>First, I will take end times in a separate data frame for further use. I’ll reformat it in date-time format using <code>as.POSIXct()</code>, and change the time zone to India’s Asia/Kolkata.</p>
<pre class="r"><code>df = as.data.frame(st$endTime)
colnames(df) = &quot;endTime&quot;
df$endTime = as.POSIXct(df$endTime,format=&quot;%Y-%m-%d %H:%M&quot;,tz=&quot;GMT&quot;)
attributes(df$endTime)$tzone = &quot;Asia/Kolkata&quot;</code></pre>
<p>Then, I’ll add additional columns in the dataframe for hour, minute and seconds of time when I finished listening.</p>
<pre class="r"><code>df$period = format(df$endTime, &quot;%p&quot;)
df$hour = format(df$endTime, &quot;%I&quot;)
df$month = format(df$endTime, &quot;%b&quot;)</code></pre>
<p>Then, I’ll modify the data frame and make it into a count-table by hours.</p>
<pre class="r"><code>df_at = df %&gt;% add_count(period,hour) %&gt;% distinct(period, hour, n)</code></pre>
<p>Finally, I’ll make the clock plot. I use <code>coord_polar()</code> to convert into polar coordinates. The <code>theme()</code> is used for cosmetic reasons.</p>
<pre class="r"><code>ggplot(df_at, aes(x = as.factor(hour), y = n, fill = period)) +
  geom_bar(stat = &quot;identity&quot;, position = &quot;dodge&quot;) +
  coord_polar(theta = &quot;x&quot;, start = 0.26) +
  xlab(&quot;&quot;) + ylab(&quot;&quot;) +
  theme(axis.ticks = element_blank(), axis.text.y = element_blank(), 
        panel.background = element_blank(), panel.grid.major.x = element_line(colour=&quot;grey&quot;),
        axis.text.x = element_text(size = 25), legend.title=element_blank()) +
  labs(title = &quot;When do I listen to music?&quot;)</code></pre>
<div class="figure">
<img src="images/listen_clock.png" alt="" />
<p class="caption">listening timings</p>
</div>
<p>I listen most in the morning between 8 AM and 12 PM. As the day proceeds, my listening also falls, virtually stopping in the afternoon. It picks up again in the evening and stays at a relatively constant level till around 10 PM.</p>
<div id="did-you-like-this-small-exploration-why-dont-you-try-your-own-and-see-what-you-find-for-your-own-music" class="section level3">
<h3>Did you like this small exploration? Why don’t you try your own and see what you find for your own music!</h3>
<p>Please feel free to contact me if you encounter any errors. My email: <a href="mailto:hello@harsh17.in" class="email">hello@harsh17.in</a>.</p>
</div>
</div>
</div>
